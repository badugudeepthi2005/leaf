<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Leaf Disease Detector & Smart Farming</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* background leaf image with subtle overlay */
    body {
      background-image: url('https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=5b9157a0d5e6d4b3879f3f46b0e0c6b8');
      background-size: cover;
      background-position: center;
    }
    .glass {
      backdrop-filter: blur(6px) saturate(120%);
      background-color: rgba(255,255,255,0.65);
    }
    .accent { color: #185e3d; }
  </style>
</head>
<body class="min-h-screen text-gray-800">
  <!-- Top Navbar -->
  <header class="w-full glass shadow-md">
    <div class="max-w-6xl mx-auto flex items-center justify-between p-4">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-full bg-white flex items-center justify-center shadow-sm">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 13V6a2 2 0 012-2h6m6 14v-7a2 2 0 00-2-2h-6" />
          </svg>
        </div>
        <div>
          <h1 id="brand" class="text-xl font-bold accent">Leaf Disease Detector</h1>
          <div class="text-xs text-gray-600">Smart Farming • Organic Methods • Bilingual</div>
        </div>
      </div>

      <nav class="flex items-center gap-3">
        <button onclick="showPage('home')" class="px-3 py-2 rounded hover:bg-green-50">Home</button>
        <button onclick="showPage('organic')" class="px-3 py-2 rounded hover:bg-green-50">Organic Farming</button>
        <button onclick="showPage('detect')" class="px-3 py-2 rounded hover:bg-green-50">Detect Disease</button>

        <select id="langSwitch" aria-label="Language switch" class="border rounded p-1 bg-white" onchange="changeLang(this.value)">
          <option value="en">English</option>
          <option value="te">తెలుగు</option>
        </select>
      </nav>
    </div>
  </header>

  <!-- Main container -->
  <main class="max-w-6xl mx-auto p-6 space-y-6">

    <!-- HOME -->
    <section id="home" class="glass p-8 rounded-lg shadow-md">
      <div class="grid md:grid-cols-2 gap-6 items-center">
        <div>
          <h2 id="homeTitle" class="text-3xl font-bold accent">Leaf Disease Detector & Smart Farming</h2>
          <p id="homeSubtitle" class="mt-3 text-lg text-gray-700">Upload a clear photo of the leaf to detect disease. Get remedies, medicines and organic farming guidance in text and voice.</p>

          <ul id="homeFeatures" class="mt-4 list-disc pl-6 text-gray-700 space-y-2">
            <li>Accurate disease detection (image upload placeholder)</li>
            <li>Remedies & organic treatments for common diseases</li>
            <li>Crop-specific organic farming methods</li>
            <li>Bilingual UI and voice output (English / తెలుగు)</li>
          </ul>

          <div class="mt-6 flex gap-3">
            <button onclick="showPage('detect')" class="bg-green-700 text-white px-4 py-2 rounded shadow">Detect Now</button>
            <button onclick="showPage('organic')" class="border px-4 py-2 rounded">Organic Farming Methods</button>
          </div>
        </div>
        <div class="p-6">
          <img alt="leaf" src="https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=1d2b9bd1f6c5e9f9d6f6ae7dd0b4f7b1" class="rounded-lg shadow-md w-full" />
        </div>
      </div>
    </section>

    <!-- ORGANIC FARMING -->
    <section id="organic" class="hidden glass p-6 rounded-lg shadow-md">
      <h2 id="organicTitle" class="text-2xl font-bold accent">Organic Farming Methods</h2>
      <p id="organicIntro" class="mt-2 text-gray-700">Crop-wise organic guidance to improve soil health, control pests and increase yield.</p>

      <div class="mt-4 grid md:grid-cols-2 gap-4">
        <div class="bg-white p-4 rounded shadow-sm">
          <h3 class="font-semibold">Rice / ధాన్యం</h3>
          <ul id="riceList" class="list-decimal pl-6 mt-2 text-gray-700">
          </ul>
        </div>
        <div class="bg-white p-4 rounded shadow-sm">
          <h3 class="font-semibold">Tomato / టమోటా</h3>
          <ul id="tomatoList" class="list-decimal pl-6 mt-2 text-gray-700">
          </ul>
        </div>
        <div class="bg-white p-4 rounded shadow-sm">
          <h3 class="font-semibold">Maize / మొక్కజొన్న</h3>
          <ul id="maizeList" class="list-decimal pl-6 mt-2 text-gray-700">
          </ul>
        </div>
        <div class="bg-white p-4 rounded shadow-sm">
          <h3 class="font-semibold">Chilli / మిరప</h3>
          <ul id="chilliList" class="list-decimal pl-6 mt-2 text-gray-700">
          </ul>
        </div>
      </div>

      <div class="mt-6 flex gap-3">
        <button onclick="speak(currentLang === 'en' ? 'Here are organic methods for common crops' : 'ఇక్కడ ప్రసిద్ధ పంటల కోసం జీవసంబంధమైన పద్ధతులు ఉన్నాయి')" class="px-4 py-2 border rounded">Play Intro Voice</button>
        <button onclick="showPage('detect')" class="px-4 py-2 bg-green-700 text-white rounded">Go to Detection</button>
      </div>
    </section>

    <!-- DETECTION -->
    <section id="detect" class="hidden glass p-6 rounded-lg shadow-md">
      <h2 id="detectTitle" class="text-2xl font-bold accent">Detect Leaf Disease</h2>
      <p id="detectIntro" class="mt-2 text-gray-700">Upload a clear photo (single leaf) and press Detect. This demo uses a placeholder classifier — integrate your ML endpoint in predictDisease().</p>

      <div class="mt-4 grid md:grid-cols-2 gap-6 items-start">
        <div>
          <input id="leafInput" accept="image/*" type="file" class="block w-full p-2 border rounded bg-white" onchange="previewImage(event)" />
          <img id="preview" class="mt-4 rounded shadow-sm max-h-64 object-contain w-full" alt="preview" />

          <div class="mt-4 flex gap-2">
            <button onclick="predictDisease()" class="bg-green-700 text-white px-4 py-2 rounded">Detect Disease</button>
            <button onclick="speakResult()" class="border px-4 py-2 rounded" id="speakBtn">Speak Result</button>
          </div>
        </div>

        <div class="bg-white p-4 rounded shadow-sm">
          <h4 class="font-semibold">Result</h4>
          <div id="result" class="mt-2 text-gray-700">No detection yet.</div>

          <div class="mt-4">
            <h5 class="font-semibold">Suggested Remedies / సూచనలు</h5>
            <ul id="remedies" class="list-disc pl-6 mt-2 text-gray-700"></ul>
          </div>

          <div class="mt-4">
            <h5 class="font-semibold">Suggested Medicine / మందు</h5>
            <div id="medicine" class="mt-2 text-gray-700">—</div>
          </div>
        </div>
      </div>

    </section>

  </main>

  <footer class="max-w-6xl mx-auto p-4 text-center glass rounded mt-6">
    <div class="text-sm text-gray-700">© 2025 Leaf Disease Detector and Smart Farming — Built for clarity and usability.</div>
  </footer>


  <script>
    // --- Translations ---
    const CONTENT = {
      en: {
        homeTitle: 'Leaf Disease Detector & Smart Farming',
        homeSubtitle: 'Upload a clear photo of the leaf to detect disease. Get remedies, medicines and organic farming guidance in text and voice.',
        organicTitle: 'Organic Farming Methods',
        organicIntro: 'Crop-wise organic guidance to improve soil health, control pests and increase yield.',
        detectTitle: 'Detect Leaf Disease',
        detectIntro: 'Upload a clear photo (single leaf) and press Detect. This demo uses a placeholder classifier — integrate your ML endpoint in predictDisease().'
      },
      te: {
        homeTitle: 'ఆకు వ్యాధి గుర్తింపు & స్మార్ట్ వ్యవసాయం',
        homeSubtitle: 'ఆకును స్పష్టంగా ఫోటో తీసి అప్లోడ్ చేయండి. వ్యాధి గుర్తింపు, చికిత్సలు, మరియు జీవసంబంధమైన పద్ధతులు నమూనా వాయిస్‌తో పొందండి.',
        organicTitle: 'జీవసంబంధమైన వ్యవసాయం పద్ధతులు',
        organicIntro: 'మట్టిని మెరుగుపరచడం, pests ను నియంత్రించడం మరియు ఉత్పాదకత పెంచుకోడానికి పంటల వారీగా సూచనలు.',
        detectTitle: 'ఆకు వ్యాధి గుర్తింపు',
        detectIntro: 'స్పష్టమైన ఆకుపటానికి ఫోటోను అప్లోడ్ చేసి Detect నొక్కండి. ఇది డెమో — మీ ML ఎండ్‌పాయింట్ ఇక్కడ కలపండి.'
      }
    };

    // Crop-specific organic methods (short and practical)
    const ORGANIC_METHODS = {
      rice: {
        en: [
          'Use well-decomposed farmyard manure before transplanting.',
          'Practice alternate wetting and drying to save water and reduce disease.',
          'Use resistant varieties and maintain proper spacing.'
        ],
        te: [
          'రూపాంటింపుకు ముందు బాగా కరిగిన ఎన్నెండూ మినరల్ ఎరువు వాడండి.',
          'నీటి సేవ్ కోసం alternate wetting and drying ఆచరణ చేయండి.',
          'ప్రతిరక్ష ఈ రకాల విత్తనాలు మరియు సరైన దూరం ఉంచండి.'
        ]
      },
      tomato: {
        en: [
          'Use compost and ensure good drainage to avoid root rot.',
          'Apply neem-based biopesticides for aphids and whiteflies.',
          'Stake plants and prune lower leaves to improve air circulation.'
        ],
        te: [
          'కాంపోస్ట్ వాడండి మరియు మంచి డ్రైనేజీ కల్గించండి.',
          'ఆఫిడ్స్, వైట్‌ఫ్లై కోసం నీమ్ ఆధారిత బయోపెస్టిసైడ్ వాడండి.',
          'వెయ్యి చెట్లు నిలిపివేయి మరియు దిగువ ఆకులను కత్తిరించండి.'
        ]
      },
      maize: {
        en: [
          'Rotate crops and use deep-tilled organic matter to improve soil.',
          'Use timely sowing and resistant hybrids where available.',
          'Monitor for stem borers and use pheromone traps.'
        ],
        te: [
          'పంటల రొటేషన్ చేయండి మరియు మట్టికి ఆర్గానిక్ పదార్థం త్రవ్వండి.',
          'తప్పక సీథు విత్తనాలు వాపరగా వాడండి.',
          'స్టెం బోర్లు కోసం ప్యరోమోన్ traps ఉపయోగించండి.'
        ]
      },
      chilli: {
        en: [
          'Use vermicompost for steady nutrient release.',
          'Mulch to conserve moisture and reduce weeds.',
          'Use Trichoderma as a seed treatment to control soil pathogens.'
        ],
        te: [
          'ఇచ్చని న్యూట్రియంట్లు కోసం వర్మికంపోస్ట్ వాడండి.',
          ' తేమ కాపాడటానికి మల్చ్ చేయండి.',
          'మట్టిలోని పాథోజెన్లు తగ్గించేందుకు ట్రైకోడెర్మా విత్తన శుద్ధికరణగా వాడండి.'
        ]
      }
    };

    // Fill organic lists
    function populateOrganic(lang) {
      document.getElementById('riceList').innerHTML = '';
      ORGANIC_METHODS.rice[lang].forEach(i => { const li=document.createElement('li'); li.textContent=i; document.getElementById('riceList').appendChild(li); });
      document.getElementById('tomatoList').innerHTML = '';
      ORGANIC_METHODS.tomato[lang].forEach(i => { const li=document.createElement('li'); li.textContent=i; document.getElementById('tomatoList').appendChild(li); });
      document.getElementById('maizeList').innerHTML = '';
      ORGANIC_METHODS.maize[lang].forEach(i => { const li=document.createElement('li'); li.textContent=i; document.getElementById('maizeList').appendChild(li); });
      document.getElementById('chilliList').innerHTML = '';
      ORGANIC_METHODS.chilli[lang].forEach(i => { const li=document.createElement('li'); li.textContent=i; document.getElementById('chilliList').appendChild(li); });
    }

    // Page routing (single-file pages)
    function showPage(id) {
      ['home','organic','detect'].forEach(p=> document.getElementById(p).classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
      // update title for screen readers
      document.title = document.getElementById(id+'Title') ? document.getElementById(id+'Title').textContent : 'Leaf Disease Detector';
    }

    // Localization
    let currentLang = 'en';
    function changeLang(lang) {
      currentLang = lang;
      const C = CONTENT[lang];
      document.getElementById('homeTitle').textContent = C.homeTitle;
      document.getElementById('homeSubtitle').textContent = C.homeSubtitle;
      document.getElementById('organicTitle').textContent = C.organicTitle;
      document.getElementById('organicIntro').textContent = C.organicIntro;
      document.getElementById('detectTitle').textContent = C.detectTitle;
      document.getElementById('detectIntro').textContent = C.detectIntro;
      populateOrganic(lang);
      // update brand name small
      document.getElementById('brand').textContent = lang === 'en' ? 'Leaf Disease Detector' : 'ఆకు వ్యాధి గుర్తింపు';
    }

    // --- Image preview ---
    function previewImage(ev) {
      const img = document.getElementById('preview');
      const file = ev.target.files && ev.target.files[0];
      if (!file) { img.src=''; return; }
      const url = URL.createObjectURL(file);
      img.src = url;
    }

    // -- Fake disease predictor with bilingual outputs --
    const SAMPLE_DB = {
      'early blight': {
        en: {desc: 'Early Blight', remedies: ['Remove infected leaves', 'Increase air circulation', 'Apply copper or mancozeb spray'], medicine: 'Mancozeb'},
        te: {desc: 'ఎర్లీ బ్లైట్', remedies: ['బాధిత ఆకులను తీసివేయండి', 'వాయు పరివాహం పెంచండి', 'కాపర్ లేదా మాంకోజెబ్ స్ప్రే చేయండి'], medicine: 'మాంకోజెబ్'}
      },
      'powdery mildew': {
        en: {desc: 'Powdery Mildew', remedies: ['Remove affected parts', 'Use neem based sprays', 'Improve spacing'], medicine: 'Sulphur-based fungicide'},
        te: {desc: 'పుడపుడే మైల్‌డ్యూ', remedies: ['బాధిత భాగాలను తీసివేయండి','నీమ్ స్ప్రేలు వాడండి','దూరం పెంచండి'], medicine: 'సల్ఫర్ ఫంగిసైడ్'}
      }
    };

    function predictDisease() {
      const input = document.getElementById('leafInput');
      const resultDiv = document.getElementById('result');
      const remediesUl = document.getElementById('remedies');
      const medDiv = document.getElementById('medicine');

      if (!input.files || !input.files.length) {
        resultDiv.textContent = currentLang === 'en' ? 'Please upload a leaf image first.' : 'దయచేసి ముందుగా ఆకు చిత్రం అప్లోడ్ చేయండి.';
        return;
      }

      // Placeholder prediction logic: pick a disease based on filename (demo only)
      const filename = input.files[0].name.toLowerCase();
      let key = 'early blight';
      if (filename.includes('powder') || filename.includes('mildew')) key = 'powdery mildew';

      const entry = SAMPLE_DB[key][currentLang];
      resultDiv.textContent = (currentLang === 'en' ? 'Predicted Disease: ' : 'అంచనా వ్యాధి: ') + entry.desc;

      remediesUl.innerHTML = '';
      entry.remedies.forEach(r => { const li = document.createElement('li'); li.textContent = r; remediesUl.appendChild(li); });
      medDiv.textContent = entry.medicine;

      // speak result automatically
      speak((currentLang === 'en' ? 'Predicted disease: ' + entry.desc + '. Suggested medicine: ' + entry.medicine : entry.desc + ' . సూచించబడిన మందు: ' + entry.medicine));
    }

    // Speak helper with language support (tries to pick a matching voice)
    function speak(text) {
      if (!('speechSynthesis' in window)) return;
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = currentLang === 'en' ? 'en-US' : 'te-IN';
      // prefer matching voice if available
      const voices = speechSynthesis.getVoices ? speechSynthesis.getVoices() : [];
      for (let v of voices) {
        if (currentLang === 'te' && v.lang.startsWith('te')) { utter.voice = v; break; }
        if (currentLang === 'en' && v.lang.startsWith('en')) { utter.voice = v; break; }
      }
      speechSynthesis.cancel(); // stop other speech
      speechSynthesis.speak(utter);
    }

    function speakResult() {
      const txt = document.getElementById('result').textContent || '';
      if (txt) speak(txt);
    }

    // Initialization
    changeLang('en');
    showPage('home');

    // Ensure voices loaded (many browsers load async)
    if (typeof speechSynthesis !== 'undefined') {
      speechSynthesis.onvoiceschanged = () => { /* no-op, voices will be used on next speak */ };
    }

    // Accessibility: keyboard navigation between pages (1,2,3)
    document.addEventListener('keydown', (e) => {
      if (e.key === '1') showPage('home');
      if (e.key === '2') showPage('organic');
      if (e.key === '3') showPage('detect');
    });

  </script>
</body>
</html>